#!/bin/tcsh
###User input interactive
if ($#argv < 4) then
	echo "create_postProc postproc_cmd_to_be_sourced script_prefix basedir tstamp" 
 exit
endif
#####################################################
set postproc_cmd = $argv[1]
set sbasedir = $argv[2]
set basedir = $argv[3]
set tstamp = $argv[4]
set codepath=$sbasedir/postProc/postProc_command_$tstamp
mkdir -p $sbasedir/postProc/

set template = $basedir/utils/templates/postproc/template_postProc
 if (-e $postproc_cmd) then
  unalias cp
  cp -f $template $codepath
  sed -i 's%<'POSTPROC_CMD'>%'$postproc_cmd% $codepath
  echo "postProc command script location: $codepath"
  chmod u+x $codepath
 else 
 echo "Cannot create postProc_command , the script to be sourced does not exist"
 endif
